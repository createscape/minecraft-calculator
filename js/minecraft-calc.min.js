/* Copyright 2023 Createscape Design Studio - https://www.createscape.ca */
function formatBlockIcon(e){return e.id?$('<span class="dropdown-text"><img src="icon-images/'+e.element.value.toLowerCase().replaceAll(" ","_")+'.png" class="block-icon '+e.text+'"/>'+e.text+" </span>"):e.text}$(document).ready(function(){$("#item-names-1").select2({templateResult:formatBlockIcon,templateSelection:formatBlockIcon})});let itemNamesList=itemList.map(function(e){return e[0]}),select=document.getElementById("item-names-1");for(var i=0;i<itemNamesList.length;i++)select.options.add(new Option(itemNamesList[i],itemNamesList[i]));let rowCount=1,countArray=[1],id="";function newRow(){let e='<div class="is-12 column"><div class="field has-addons"> <div class="control has-icons-left">  <select name="item" id="item-names-'+ ++rowCount+'" class="item-names input" ></select> </div>  <div class="control"> <input type="number" class="input number" name="number" id="item-number-'+rowCount+'" min=0 value=1></div></div>';document.getElementById("items").insertAdjacentHTML("beforeend",e);let t="#"+(id="item-names-"+rowCount),m=document.getElementById(id);for(var n=0;n<itemNamesList.length;n++)m.options.add(new Option(itemNamesList[n],itemNamesList[n]));$(t).select2({templateResult:formatBlockIcon,templateSelection:formatBlockIcon}),countArray.push(rowCount)}let outputField=document.getElementById("output"),additionArrayNew=[];function displayBuildList(){let e=[];for(i=0;i<countArray.length;i++){id="item-names-"+countArray[i];let t="item-number-"+countArray[i],m=document.getElementById(id).value,n=document.getElementById(t).value,l=itemList.findIndex(e=>e.includes(m)),o=itemList[l];if(o[8]){let a=Math.ceil(o[3]/o[1]*n),s=Math.ceil(o[5]/o[1]*n),u=Math.ceil(o[7]/o[1]*n),c=Math.ceil(o[9]/o[1]*n),r={itemName:o[2],itemAmount:a},d={itemName:o[4],itemAmount:s},p={itemName:o[6],itemAmount:u},f={itemName:o[8],itemAmount:c};e.push(r,d,p,f)}if(o[6]&&!o[8]){let N=Math.ceil(o[3]/o[1]*n/o[3])*o[3],A=Math.ceil(o[5]/o[1]*n/o[5])*o[5],v=Math.ceil(o[7]/o[1]*n/o[7])*o[7],_={itemName:o[2],itemAmount:N},y={itemName:o[4],itemAmount:A},B={itemName:o[6],itemAmount:v};e.push(_,y,B)}if(o[4]&&!o[6]){let g=Math.ceil(o[3]/o[1]*n/o[3])*o[3],w=Math.ceil(o[5]/o[1]*n/o[5])*o[5],I={itemName:o[2],itemAmount:g},L={itemName:o[4],itemAmount:w};e.push(I,L)}if(!o[4]){let h=Math.ceil(o[3]/o[1]*n/o[3])*o[3],b={itemName:o[2],itemAmount:h};e.push(b)}}var k=Object.entries(e.reduce((e,t)=>(t.itemName in e?e[t.itemName]+=t.itemAmount:e[t.itemName]=t.itemAmount,e),{})).map(([e,t])=>`${e}: ${t}`).join("\n");outputField.value=k}function clearBuildList(){outputField.value=""}